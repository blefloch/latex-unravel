%
% Copyright (C) 2015 Bruno Le Floch
%
\documentclass{minimal}
\input{regression-test}
\RequirePackage[log-functions,check-declarations]{expl3}

\RequirePackage{unravel}

\begin{document}

\START
\ExplSyntaxOn

\unravelsetup { machine }

\TEST { \unravel ~ and ~ \font }
  {
    \unravel
      {
        \font \A = cmti10 ~ at ~ 10pt
        \font \B = cmti10 \relax
        \show \A
        \show \B
        \showthe \A
        \showthe \B
        \A
        \B
      }
  }

\OMIT
\countdef \C 0 \relax
\dimendef \D 0 \relax
\skipdef  \S 0 \relax
\muskipdef\M 0 \relax
\TIMO

\TEST { \unravel ~ and ~ incompatible ~ glue ~ units }
  {
    \unravel { \C \C \relax }
    \unravel { \C \D \relax }
    \unravel { \C \S \relax }
    \unravel { \C \M \relax }
    \unravel { \D \C pt \relax }
    \unravel { \D \D \relax }
    \unravel { \D \S \relax }
    \unravel { \D \M \relax }
    \unravel { \S \C pt plus 1fil \relax }
    \unravel { \S \D plus 1fil \relax }
    \unravel { \S \S minus 1fil \relax }
    \unravel { \S \M minus 1fil \relax }
    \unravel { \M \C mu plus 1fil \relax }
    \unravel { \M \D plus 1fil \relax }
    \unravel { \M \S minus 1fil \relax }
    \unravel { \M \M minus 1fil \relax }
  }

\END
